{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/main.js"],"names":[],"mappings":"AAAA;aCUA,IAAI,YAAc,gBAElB,YAAY,kBAAqB,WAIhC,IAAI,GAQH,KAAM,WACL,EAAK,uBAON,oBAAqB,WACpB,IAAI,EAAQ,KAEZ,QAAQ,IAAI,6BAEZ,WAAW,WACN,OAAO,GACV,QAAQ,IAAI,uCACZ,EAAK,UACL,EAAK,UACL,EAAK,mBAGL,QAAQ,IAAI,aACZ,EAAM,wBAEL,MAOJ,eAAgB,WAQf,IAKI,EAAQ,SAAS,MAAQ,SAAS,qBAAqB,QAAQ,GAClE,EAAS,SAAS,cAAc,SAEjC,EAAO,KAAO,WACV,EAAO,WACV,EAAO,WAAW,QAVR,UAYV,EAAO,YAAY,SAAS,eAZlB,YAcX,EAAM,YAAY,IASnB,QAAS,WAET,QAAQ,IAAI,mBACV,IAEM,GACN,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAExI,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAEpV,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAExI,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,iBAAiB,kBATxM,SAAS,iBAAiB,sCAa9B,QAAQ,SAAC,GAElB,IAAK,IAAM,KAAQ,EAAiB,CACpC,IAAM,EAAiB,EAAY,cAAc,mBAC7C,GAAI,OAAO,eAAe,KAAK,EAAiB,GAAO,CACvD,IAAM,EAAsB,EAAgB,GACxC,GAAK,EAAe,YAAc,EAAsB,CACpD,IAAM,EAAqB,SAAS,cAAc,OAClD,EAAmB,UAAU,IAAI,yBACjC,EAAmB,UAAnB,qQAEA,EAAY,OAAO,SAczC,UAAW,WAAoB,IAAV,EAAU,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAJ,GAE1B,QAAQ,IAAI,oBAAsB,IAgBnC,aAAc,WAEb,WAAW,WACV,EAAE,QAAQ,SACV,QAAQ,IAAI,mBACV,MAGJ,QAAS,WACR,SAAS,EAAW,EAAI,GACf,IAAI,IAAI,KAAO,EACf,EAAG,aAAa,EAAK,EAAM,IAI/B,SAAS,EAAQ,GACb,EAAE,cAAgB,gBAClB,EAAE,gBAAkB,eACpB,EAAE,OAAS,eACX,EAAE,OAAS,EACX,EAAE,GAAG,KAAM,KAEf,IAAM,EAAe,SAAS,iBAAiB,sCACzC,EAAc,SAAS,cAAc,2BAE3C,EAAa,QAAQ,SAAC,GAClB,EAAY,iBAAiB,gCAAgC,QAAQ,SAAC,GACnE,IAAM,EAAQ,EAAE,SAAS,GAAG,SAAS,GAC/B,EAAY,EAAE,SAAS,GAAG,SAAS,GAAG,UAC5C,EAAW,GACT,iBAAsB,YACpB,YAAA,yBAA6C,EAC7C,QAAoB,iBACpB,QAAoB,iBAExB,EAAM,QAAU,WACf,EAAQ,EAAM,aAAa,mBAKnC,EAAW,GACV,iBAAoB,YACpB,YAAA,yBAA6C,EAAY,UACzD,QAAoB,iBACpB,QAAoB,iBAGrB,EAAY,QAAU,WACpB,EAAQ,EAAY,aAAa,iBAM1C,OACC,KAAM,GA7LyB,GAkMjC,YAAY,kBAAkB,KAAK","file":"main.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// ==========================================================================\n//  This is a boilerplate to use for target activities\n//\n//\tURL example: add in url of project for visibility here\n// ==========================================================================\n\n// ==========================================================================\n// Scripts, helper widgets - import below\n// ==========================================================================\n\nvar cheillondon = cheillondon || {};\n\ncheillondon.targetBoilerplate = (function () {\n\n\t'use strict';\n\n\tvar main = {\n\n\t\t// ==========================================================================\n\t\t// Variables and config Properties add below\n\t\t// ==========================================================================\n\n\n\t\t//Init\n\t\tinit: function () {\n\t\t\tmain.doEverythingTimeout();\n\t\t},\n\n\n\t\t// ==========================================================================\n\t\t// Checking jQuery\n\t\t// ==========================================================================\n\t\tdoEverythingTimeout: function () {\n\t\t\tvar _self = this;\n\n\t\t\tconsole.log('XXX - doEverythingTimeout');\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tif (window.$) {\n\t\t\t\t\tconsole.log('doEverythingTimeout - jQuery loaded');\n\t\t\t\t\tmain.kickoff();\n\t\t\t\t\tmain.tagging();\n\t\t\t\t\tmain.appendNewStyle();\n\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('no jquery')\n\t\t\t\t\t_self.doEverythingTimeout();\n\t\t\t\t}\n\t\t\t}, 6000)\n\t\t},\n\n\n\t\t// ==========================================================================\n\t\t// Adding style\n\t\t// ==========================================================================\n\t\tappendNewStyle: function () {\n\n\t\t\t/* FYI: the CSS code is in separated file, in SCSS format that generates the CSS file. After, the gulp file finds the [CSS] and replaces with minified code from file */\n\n\t\t\t//To insert minified inline string uncomment this variable and paste here\n\t\t\t//Else, use default uncommented variable\n\t\t\t// var _css = '';\n\n\t\t\tvar _css = '[[CSS]]';\n\n\t\t\t//\n\t\t\t// Adding style definitions to DOM\n\t\t\t// --------------------------------------------------------------------------\n\t\t\tvar _head = document.head || document.getElementsByTagName('head')[0],\n\t\t\t\t_style = document.createElement('style');\n\n\t\t\t_style.type = 'text/css';\n\t\t\tif (_style.styleSheet) { // This is required for IE8 and below.\n\t\t\t\t_style.styleSheet.cssText = _css;\n\t\t\t} else {\n\t\t\t\t_style.appendChild(document.createTextNode(_css));\n\t\t\t}\n\t\t\t_head.appendChild(_style);\n\n\t\t},\n\n\n\n\t\t// ==========================================================================\n\t\t// When page is already loaded we need to add the new elements\n\t\t// ==========================================================================\n\t\tkickoff: function () {\n\n\t\tconsole.log('we have kickoff') // this is purely for testing\n    const cartWrappers = document.querySelectorAll('.delivery-info-description-wrapper');\n\n    const spreadsheetSkus = [\n    \"QE85QN900ATXXU\",\"QE75QN900ATXXU\",\"QE65QN900ATXXU\",\"QE85QN800ATXXU\",\"QE75QN800ATXXU\",\"QE65QN800ATXXU\",\"QE75QN700ATXXU\",\"QE65QN700ATXXU\",\"QE55QN700ATXXU\",\n\n    \"QE85QN95AATXXU\",\"QE75QN95AATXXU\",\"QE65QN95AATXXU\",\"QE55QN95AATXXU\",\"QE85QN94CATXXU\",\"QE75QN94AATXXU\",\"QE65QN94AATXXU\",\"QE55QN94AATXXU\",\"QE50QN94AATXXU\",\"QE43QN94AATXXU\",\"QE98QN90AATXXU\",\"QE85QN90AATXXU\",\"QE75QN90AATXXU\",\"QE65QN90AATXXU\",\"QE55QN90AATXXU\",\"QE50QN90AATXXU\",\"QE43QN90AATXXU\",\"QE85QN85AATXXU\",\"QE75QN85AATXXU\",\"QE65QN85AATXXU\",\"QE55QN85AATXXU\",\n\n    \"QE85QN900BTXXU\",\"QE75QN900BTXXU\",\"QE65QN900BTXXU\",\"QE85QN800BTXXU\",\"QE75QN800BTXXU\",\"QE65QN800BTXXU\",\"QE75QN700BTXXU\",\"QE65QN700BTXXU\",\"QE55QN700BTXXU\",\n\n    \"QE85QN95BATXXU\",\"QE75QN95BATXXU\",\"QE65QN95BATXXU\",\"QE55QN95BATXXU\",\"QE85QN90BATXXU\",\"QE75QN90BATXXU\",\"QE65QN90BATXXU\",\"QE55QN90BATXXU\",\"QE50QN90BATXXU\",\"QE43QN90BATXXU\",\"QE85QN85BATXXU\",\"QE75QN85BATXXU\",\"QE65QN85BATXXU\",\"QE55QN85BATXXU\"\n    ];\n\n\n        cartWrappers.forEach((cartWrapper) => { // Loop through each cartWrapper\n\n            for (const skus in spreadsheetSkus) { // Loop through each sku\n            const currentCartSku = cartWrapper.querySelector('.info-left-code');\n                if (Object.hasOwnProperty.call(spreadsheetSkus, skus)) { // Check if sku is in spreadsheet\n                const spreadsheetSkuValue = spreadsheetSkus[skus];\n                    if ( currentCartSku.innerText === spreadsheetSkuValue ) {\n                        const tvTradeInContainer = document.createElement('div');\n                        tvTradeInContainer.classList.add('tv-trade-in-container');\n                        tvTradeInContainer.innerHTML =\n                        `<p><strong>TV Trade-up:</strong> Free delivery, collection & recycling of your old TV is included with all options (usually Â£20). Please select the delivery and/or installation options you need. Your old TV will be collected when we deliver your new one.</p>`;\n                        cartWrapper.append(tvTradeInContainer);\n                    }\n                }\n            }\n        });\n\n\n\n\t\t},\n\n\n\t\t// ==========================================================================\n\t\t// Set Events\n\t\t// ==========================================================================\n\t\tsetEvents: function (elm = '') {\n\n\t\t\tconsole.log('XXX - setEvents: ' + elm);\n\n\t\t\tswitch (elm) {\n\t\t\t\tcase 'modal':\n\t\t\t\t\t//code to open modal;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'financePopup':\n\t\t\t\t//code to open something else;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\n\n\t\t},\n\n\t\tresizeWindow: function () {\n\t\t\t// as new elements added to panel we need to resize window to activate amend height of Product Panels\n\t\t\tsetTimeout(function () {\n\t\t\t\t$(window).resize();\n\t\t\t\tconsole.log('window resized');\n\t\t\t}, 100);\n\t\t},\n\n\t\ttagging: function () {\n\t\t\tfunction addTagging(el, attrs) {\n            for(let key in attrs) {\n            el.setAttribute(key, attrs[key]);\n            }\n        }\n\n        function tagging(data) {\n            s.linkTrackVars = \"eVar41,events\";\n            s.linkTrackEvents = \"scAdd,scView\";\n            s.events = \"scAdd,scView\";\n            s.eVar41 = data;\n            s.tl(this, 'o');\n        };\n        const cartWrappers = document.querySelectorAll('.delivery-info-description-wrapper');\n\t\t\t\t\t\t\t\tconst continueBtn = document.querySelector(\".cx-summary-continueBtn\");\n\n        cartWrappers.forEach((cartWrapper) => {\n            cartWrapper.querySelectorAll('.info-right-checkbox-wrapper').forEach((x) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst input = x.children[0].children[0];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst inputText = x.children[0].children[1].innerText\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taddTagging(input,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ \"data-omni-type\"    : \"microsite\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"data-omni\"       : `uk:228:cart:tvtradeup:${inputText}`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"ga-ac\"           : \"pd buying tool\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"ga-ca\"           : \"option input\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinput.onclick = () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttagging(input.getAttribute('data-omni'));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t})\n        })\n\n\t\t\t\t\t\t\t\taddTagging(continueBtn,{\n\t\t\t\t\t\t\t\t\t\"data-omni-type\"  : \"microsite\",\n\t\t\t\t\t\t\t\t\t\"data-omni\"       : `uk:228:cart:tvtradeup:${continueBtn.innerText}`,\n\t\t\t\t\t\t\t\t\t\"ga-ac\"           : \"pd buying tool\",\n\t\t\t\t\t\t\t\t\t\"ga-ca\"           : \"option input\"\n\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\tcontinueBtn.onclick = () => {\n\t\t\t\t\t\t\t\t\t\ttagging(continueBtn.getAttribute('data-omni'));\n\t\t\t\t\t\t\t\t\t}\n\t\t},\n\n\n\t};\n\treturn {\n\t\tmain: main\n\t};\n\n})();\n\ncheillondon.targetBoilerplate.main.init();\n\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvbWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTthQ1VBLElBQUksWUFBYyxnQkFFbEIsWUFBWSxrQkFBcUIsV0FJaEMsSUFBSSxHQVFILEtBQU0sV0FDTCxFQUFLLHVCQU9OLG9CQUFxQixXQUNwQixJQUFJLEVBQVEsS0FFWixRQUFRLElBQUksNkJBRVosV0FBVyxXQUNOLE9BQU8sR0FDVixRQUFRLElBQUksdUNBQ1osRUFBSyxVQUNMLEVBQUssVUFDTCxFQUFLLG1CQUdMLFFBQVEsSUFBSSxhQUNaLEVBQU0sd0JBRUwsTUFPSixlQUFnQixXQVFmLElBS0ksRUFBUSxTQUFTLE1BQVEsU0FBUyxxQkFBcUIsUUFBUSxHQUNsRSxFQUFTLFNBQVMsY0FBYyxTQUVqQyxFQUFPLEtBQU8sV0FDVixFQUFPLFdBQ1YsRUFBTyxXQUFXLFFBVlIsVUFZVixFQUFPLFlBQVksU0FBUyxlQVpsQixZQWNYLEVBQU0sWUFBWSxJQVNuQixRQUFTLFdBRVQsUUFBUSxJQUFJLG1CQUNWLElBRU0sR0FDTixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUV4SSxpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUVwVixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUV4SSxpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsaUJBQWlCLGlCQUFpQixpQkFBaUIsa0JBVHhNLFNBQVMsaUJBQWlCLHNDQWE5QixRQUFRLFNBQUMsR0FFbEIsSUFBSyxJQUFNLEtBQVEsRUFBaUIsQ0FDcEMsSUFBTSxFQUFpQixFQUFZLGNBQWMsbUJBQzdDLEdBQUksT0FBTyxlQUFlLEtBQUssRUFBaUIsR0FBTyxDQUN2RCxJQUFNLEVBQXNCLEVBQWdCLEdBQ3hDLEdBQUssRUFBZSxZQUFjLEVBQXNCLENBQ3BELElBQU0sRUFBcUIsU0FBUyxjQUFjLE9BQ2xELEVBQW1CLFVBQVUsSUFBSSx5QkFDakMsRUFBbUIsVUFBbkIscVFBRUEsRUFBWSxPQUFPLFNBY3pDLFVBQVcsV0FBb0IsSUFBVixFQUFVLFVBQUEsT0FBQSxRQUFBLElBQUEsVUFBQSxHQUFBLFVBQUEsR0FBSixHQUUxQixRQUFRLElBQUksb0JBQXNCLElBZ0JuQyxhQUFjLFdBRWIsV0FBVyxXQUNWLEVBQUUsUUFBUSxTQUNWLFFBQVEsSUFBSSxtQkFDVixNQUdKLFFBQVMsV0FDUixTQUFTLEVBQVcsRUFBSSxHQUNmLElBQUksSUFBSSxLQUFPLEVBQ2YsRUFBRyxhQUFhLEVBQUssRUFBTSxJQUkvQixTQUFTLEVBQVEsR0FDYixFQUFFLGNBQWdCLGdCQUNsQixFQUFFLGdCQUFrQixlQUNwQixFQUFFLE9BQVMsZUFDWCxFQUFFLE9BQVMsRUFDWCxFQUFFLEdBQUcsS0FBTSxLQUVmLElBQU0sRUFBZSxTQUFTLGlCQUFpQixzQ0FDekMsRUFBYyxTQUFTLGNBQWMsMkJBRTNDLEVBQWEsUUFBUSxTQUFDLEdBQ2xCLEVBQVksaUJBQWlCLGdDQUFnQyxRQUFRLFNBQUMsR0FDbkUsSUFBTSxFQUFRLEVBQUUsU0FBUyxHQUFHLFNBQVMsR0FDL0IsRUFBWSxFQUFFLFNBQVMsR0FBRyxTQUFTLEdBQUcsVUFDNUMsRUFBVyxHQUNULGlCQUFzQixZQUNwQixZQUFBLHlCQUE2QyxFQUM3QyxRQUFvQixpQkFDcEIsUUFBb0IsaUJBRXhCLEVBQU0sUUFBVSxXQUNmLEVBQVEsRUFBTSxhQUFhLG1CQUtuQyxFQUFXLEdBQ1YsaUJBQW9CLFlBQ3BCLFlBQUEseUJBQTZDLEVBQVksVUFDekQsUUFBb0IsaUJBQ3BCLFFBQW9CLGlCQUdyQixFQUFZLFFBQVUsV0FDcEIsRUFBUSxFQUFZLGFBQWEsaUJBTTFDLE9BQ0MsS0FBTSxHQTdMeUIsR0FrTWpDLFlBQVksa0JBQWtCLEtBQUsiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gIFRoaXMgaXMgYSBib2lsZXJwbGF0ZSB0byB1c2UgZm9yIHRhcmdldCBhY3Rpdml0aWVzXG4vL1xuLy9cdFVSTCBleGFtcGxlOiBhZGQgaW4gdXJsIG9mIHByb2plY3QgZm9yIHZpc2liaWxpdHkgaGVyZVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNjcmlwdHMsIGhlbHBlciB3aWRnZXRzIC0gaW1wb3J0IGJlbG93XG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG52YXIgY2hlaWxsb25kb24gPSBjaGVpbGxvbmRvbiB8fCB7fTtcblxuY2hlaWxsb25kb24udGFyZ2V0Qm9pbGVycGxhdGUgPSAoZnVuY3Rpb24gKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgbWFpbiA9IHtcblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gVmFyaWFibGVzIGFuZCBjb25maWcgUHJvcGVydGllcyBhZGQgYmVsb3dcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5cblx0XHQvL0luaXRcblx0XHRpbml0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRtYWluLmRvRXZlcnl0aGluZ1RpbWVvdXQoKTtcblx0XHR9LFxuXG5cblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdC8vIENoZWNraW5nIGpRdWVyeVxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0ZG9FdmVyeXRoaW5nVGltZW91dDogZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIF9zZWxmID0gdGhpcztcblxuXHRcdFx0Y29uc29sZS5sb2coJ1hYWCAtIGRvRXZlcnl0aGluZ1RpbWVvdXQnKTtcblxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGlmICh3aW5kb3cuJCkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdkb0V2ZXJ5dGhpbmdUaW1lb3V0IC0galF1ZXJ5IGxvYWRlZCcpO1xuXHRcdFx0XHRcdG1haW4ua2lja29mZigpO1xuXHRcdFx0XHRcdG1haW4udGFnZ2luZygpO1xuXHRcdFx0XHRcdG1haW4uYXBwZW5kTmV3U3R5bGUoKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdubyBqcXVlcnknKVxuXHRcdFx0XHRcdF9zZWxmLmRvRXZlcnl0aGluZ1RpbWVvdXQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgNjAwMClcblx0XHR9LFxuXG5cblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdC8vIEFkZGluZyBzdHlsZVxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0YXBwZW5kTmV3U3R5bGU6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0LyogRllJOiB0aGUgQ1NTIGNvZGUgaXMgaW4gc2VwYXJhdGVkIGZpbGUsIGluIFNDU1MgZm9ybWF0IHRoYXQgZ2VuZXJhdGVzIHRoZSBDU1MgZmlsZS4gQWZ0ZXIsIHRoZSBndWxwIGZpbGUgZmluZHMgdGhlIFtDU1NdIGFuZCByZXBsYWNlcyB3aXRoIG1pbmlmaWVkIGNvZGUgZnJvbSBmaWxlICovXG5cblx0XHRcdC8vVG8gaW5zZXJ0IG1pbmlmaWVkIGlubGluZSBzdHJpbmcgdW5jb21tZW50IHRoaXMgdmFyaWFibGUgYW5kIHBhc3RlIGhlcmVcblx0XHRcdC8vRWxzZSwgdXNlIGRlZmF1bHQgdW5jb21tZW50ZWQgdmFyaWFibGVcblx0XHRcdC8vIHZhciBfY3NzID0gJyc7XG5cblx0XHRcdHZhciBfY3NzID0gJ1tbQ1NTXV0nO1xuXG5cdFx0XHQvL1xuXHRcdFx0Ly8gQWRkaW5nIHN0eWxlIGRlZmluaXRpb25zIHRvIERPTVxuXHRcdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRcdHZhciBfaGVhZCA9IGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXSxcblx0XHRcdFx0X3N0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcblxuXHRcdFx0X3N0eWxlLnR5cGUgPSAndGV4dC9jc3MnO1xuXHRcdFx0aWYgKF9zdHlsZS5zdHlsZVNoZWV0KSB7IC8vIFRoaXMgaXMgcmVxdWlyZWQgZm9yIElFOCBhbmQgYmVsb3cuXG5cdFx0XHRcdF9zdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBfY3NzO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0X3N0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKF9jc3MpKTtcblx0XHRcdH1cblx0XHRcdF9oZWFkLmFwcGVuZENoaWxkKF9zdHlsZSk7XG5cblx0XHR9LFxuXG5cblxuXHRcdC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFx0Ly8gV2hlbiBwYWdlIGlzIGFscmVhZHkgbG9hZGVkIHdlIG5lZWQgdG8gYWRkIHRoZSBuZXcgZWxlbWVudHNcblx0XHQvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcdGtpY2tvZmY6IGZ1bmN0aW9uICgpIHtcblxuXHRcdGNvbnNvbGUubG9nKCd3ZSBoYXZlIGtpY2tvZmYnKSAvLyB0aGlzIGlzIHB1cmVseSBmb3IgdGVzdGluZ1xuICAgIGNvbnN0IGNhcnRXcmFwcGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZWxpdmVyeS1pbmZvLWRlc2NyaXB0aW9uLXdyYXBwZXInKTtcblxuICAgIGNvbnN0IHNwcmVhZHNoZWV0U2t1cyA9IFtcbiAgICBcIlFFODVRTjkwMEFUWFhVXCIsXCJRRTc1UU45MDBBVFhYVVwiLFwiUUU2NVFOOTAwQVRYWFVcIixcIlFFODVRTjgwMEFUWFhVXCIsXCJRRTc1UU44MDBBVFhYVVwiLFwiUUU2NVFOODAwQVRYWFVcIixcIlFFNzVRTjcwMEFUWFhVXCIsXCJRRTY1UU43MDBBVFhYVVwiLFwiUUU1NVFONzAwQVRYWFVcIixcblxuICAgIFwiUUU4NVFOOTVBQVRYWFVcIixcIlFFNzVRTjk1QUFUWFhVXCIsXCJRRTY1UU45NUFBVFhYVVwiLFwiUUU1NVFOOTVBQVRYWFVcIixcIlFFODVRTjk0Q0FUWFhVXCIsXCJRRTc1UU45NEFBVFhYVVwiLFwiUUU2NVFOOTRBQVRYWFVcIixcIlFFNTVRTjk0QUFUWFhVXCIsXCJRRTUwUU45NEFBVFhYVVwiLFwiUUU0M1FOOTRBQVRYWFVcIixcIlFFOThRTjkwQUFUWFhVXCIsXCJRRTg1UU45MEFBVFhYVVwiLFwiUUU3NVFOOTBBQVRYWFVcIixcIlFFNjVRTjkwQUFUWFhVXCIsXCJRRTU1UU45MEFBVFhYVVwiLFwiUUU1MFFOOTBBQVRYWFVcIixcIlFFNDNRTjkwQUFUWFhVXCIsXCJRRTg1UU44NUFBVFhYVVwiLFwiUUU3NVFOODVBQVRYWFVcIixcIlFFNjVRTjg1QUFUWFhVXCIsXCJRRTU1UU44NUFBVFhYVVwiLFxuXG4gICAgXCJRRTg1UU45MDBCVFhYVVwiLFwiUUU3NVFOOTAwQlRYWFVcIixcIlFFNjVRTjkwMEJUWFhVXCIsXCJRRTg1UU44MDBCVFhYVVwiLFwiUUU3NVFOODAwQlRYWFVcIixcIlFFNjVRTjgwMEJUWFhVXCIsXCJRRTc1UU43MDBCVFhYVVwiLFwiUUU2NVFONzAwQlRYWFVcIixcIlFFNTVRTjcwMEJUWFhVXCIsXG5cbiAgICBcIlFFODVRTjk1QkFUWFhVXCIsXCJRRTc1UU45NUJBVFhYVVwiLFwiUUU2NVFOOTVCQVRYWFVcIixcIlFFNTVRTjk1QkFUWFhVXCIsXCJRRTg1UU45MEJBVFhYVVwiLFwiUUU3NVFOOTBCQVRYWFVcIixcIlFFNjVRTjkwQkFUWFhVXCIsXCJRRTU1UU45MEJBVFhYVVwiLFwiUUU1MFFOOTBCQVRYWFVcIixcIlFFNDNRTjkwQkFUWFhVXCIsXCJRRTg1UU44NUJBVFhYVVwiLFwiUUU3NVFOODVCQVRYWFVcIixcIlFFNjVRTjg1QkFUWFhVXCIsXCJRRTU1UU44NUJBVFhYVVwiXG4gICAgXTtcblxuXG4gICAgICAgIGNhcnRXcmFwcGVycy5mb3JFYWNoKChjYXJ0V3JhcHBlcikgPT4geyAvLyBMb29wIHRocm91Z2ggZWFjaCBjYXJ0V3JhcHBlclxuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNrdXMgaW4gc3ByZWFkc2hlZXRTa3VzKSB7IC8vIExvb3AgdGhyb3VnaCBlYWNoIHNrdVxuICAgICAgICAgICAgY29uc3QgY3VycmVudENhcnRTa3UgPSBjYXJ0V3JhcHBlci5xdWVyeVNlbGVjdG9yKCcuaW5mby1sZWZ0LWNvZGUnKTtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoc3ByZWFkc2hlZXRTa3VzLCBza3VzKSkgeyAvLyBDaGVjayBpZiBza3UgaXMgaW4gc3ByZWFkc2hlZXRcbiAgICAgICAgICAgICAgICBjb25zdCBzcHJlYWRzaGVldFNrdVZhbHVlID0gc3ByZWFkc2hlZXRTa3VzW3NrdXNdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGN1cnJlbnRDYXJ0U2t1LmlubmVyVGV4dCA9PT0gc3ByZWFkc2hlZXRTa3VWYWx1ZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR2VHJhZGVJbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHZUcmFkZUluQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3R2LXRyYWRlLWluLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHZUcmFkZUluQ29udGFpbmVyLmlubmVySFRNTCA9XG4gICAgICAgICAgICAgICAgICAgICAgICBgPHA+PHN0cm9uZz5UViBUcmFkZS11cDo8L3N0cm9uZz4gRnJlZSBkZWxpdmVyeSwgY29sbGVjdGlvbiAmIHJlY3ljbGluZyBvZiB5b3VyIG9sZCBUViBpcyBpbmNsdWRlZCB3aXRoIGFsbCBvcHRpb25zICh1c3VhbGx5IMKjMjApLiBQbGVhc2Ugc2VsZWN0IHRoZSBkZWxpdmVyeSBhbmQvb3IgaW5zdGFsbGF0aW9uIG9wdGlvbnMgeW91IG5lZWQuIFlvdXIgb2xkIFRWIHdpbGwgYmUgY29sbGVjdGVkIHdoZW4gd2UgZGVsaXZlciB5b3VyIG5ldyBvbmUuPC9wPmA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJ0V3JhcHBlci5hcHBlbmQodHZUcmFkZUluQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cblxuXG5cdFx0fSxcblxuXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHQvLyBTZXQgRXZlbnRzXG5cdFx0Ly8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XHRzZXRFdmVudHM6IGZ1bmN0aW9uIChlbG0gPSAnJykge1xuXG5cdFx0XHRjb25zb2xlLmxvZygnWFhYIC0gc2V0RXZlbnRzOiAnICsgZWxtKTtcblxuXHRcdFx0c3dpdGNoIChlbG0pIHtcblx0XHRcdFx0Y2FzZSAnbW9kYWwnOlxuXHRcdFx0XHRcdC8vY29kZSB0byBvcGVuIG1vZGFsO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdmaW5hbmNlUG9wdXAnOlxuXHRcdFx0XHQvL2NvZGUgdG8gb3BlbiBzb21ldGhpbmcgZWxzZTtcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblxuXG5cblx0XHR9LFxuXG5cdFx0cmVzaXplV2luZG93OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHQvLyBhcyBuZXcgZWxlbWVudHMgYWRkZWQgdG8gcGFuZWwgd2UgbmVlZCB0byByZXNpemUgd2luZG93IHRvIGFjdGl2YXRlIGFtZW5kIGhlaWdodCBvZiBQcm9kdWN0IFBhbmVsc1xuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQod2luZG93KS5yZXNpemUoKTtcblx0XHRcdFx0Y29uc29sZS5sb2coJ3dpbmRvdyByZXNpemVkJyk7XG5cdFx0XHR9LCAxMDApO1xuXHRcdH0sXG5cblx0XHR0YWdnaW5nOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRmdW5jdGlvbiBhZGRUYWdnaW5nKGVsLCBhdHRycykge1xuICAgICAgICAgICAgZm9yKGxldCBrZXkgaW4gYXR0cnMpIHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdGFnZ2luZyhkYXRhKSB7XG4gICAgICAgICAgICBzLmxpbmtUcmFja1ZhcnMgPSBcImVWYXI0MSxldmVudHNcIjtcbiAgICAgICAgICAgIHMubGlua1RyYWNrRXZlbnRzID0gXCJzY0FkZCxzY1ZpZXdcIjtcbiAgICAgICAgICAgIHMuZXZlbnRzID0gXCJzY0FkZCxzY1ZpZXdcIjtcbiAgICAgICAgICAgIHMuZVZhcjQxID0gZGF0YTtcbiAgICAgICAgICAgIHMudGwodGhpcywgJ28nKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY2FydFdyYXBwZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRlbGl2ZXJ5LWluZm8tZGVzY3JpcHRpb24td3JhcHBlcicpO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbnRpbnVlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jeC1zdW1tYXJ5LWNvbnRpbnVlQnRuXCIpO1xuXG4gICAgICAgIGNhcnRXcmFwcGVycy5mb3JFYWNoKChjYXJ0V3JhcHBlcikgPT4ge1xuICAgICAgICAgICAgY2FydFdyYXBwZXIucXVlcnlTZWxlY3RvckFsbCgnLmluZm8tcmlnaHQtY2hlY2tib3gtd3JhcHBlcicpLmZvckVhY2goKHgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGlucHV0ID0geC5jaGlsZHJlblswXS5jaGlsZHJlblswXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGlucHV0VGV4dCA9IHguY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV0uaW5uZXJUZXh0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhZGRUYWdnaW5nKGlucHV0LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0eyBcImRhdGEtb21uaS10eXBlXCIgICAgOiBcIm1pY3Jvc2l0ZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcImRhdGEtb21uaVwiICAgICAgIDogYHVrOjIyODpjYXJ0OnR2dHJhZGV1cDoke2lucHV0VGV4dH1gLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcImdhLWFjXCIgICAgICAgICAgIDogXCJwZCBidXlpbmcgdG9vbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcImdhLWNhXCIgICAgICAgICAgIDogXCJvcHRpb24gaW5wdXRcIlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpbnB1dC5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0YWdnaW5nKGlucHV0LmdldEF0dHJpYnV0ZSgnZGF0YS1vbW5pJykpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pXG4gICAgICAgIH0pXG5cblx0XHRcdFx0XHRcdFx0XHRhZGRUYWdnaW5nKGNvbnRpbnVlQnRuLHtcblx0XHRcdFx0XHRcdFx0XHRcdFwiZGF0YS1vbW5pLXR5cGVcIiAgOiBcIm1pY3Jvc2l0ZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XCJkYXRhLW9tbmlcIiAgICAgICA6IGB1azoyMjg6Y2FydDp0dnRyYWRldXA6JHtjb250aW51ZUJ0bi5pbm5lclRleHR9YCxcblx0XHRcdFx0XHRcdFx0XHRcdFwiZ2EtYWNcIiAgICAgICAgICAgOiBcInBkIGJ1eWluZyB0b29sXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcImdhLWNhXCIgICAgICAgICAgIDogXCJvcHRpb24gaW5wdXRcIlxuXHRcdFx0XHRcdFx0XHRcdH0pXG5cblx0XHRcdFx0XHRcdFx0XHRjb250aW51ZUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0YWdnaW5nKGNvbnRpbnVlQnRuLmdldEF0dHJpYnV0ZSgnZGF0YS1vbW5pJykpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdH0sXG5cblxuXHR9O1xuXHRyZXR1cm4ge1xuXHRcdG1haW46IG1haW5cblx0fTtcblxufSkoKTtcblxuY2hlaWxsb25kb24udGFyZ2V0Qm9pbGVycGxhdGUubWFpbi5pbml0KCk7XG5cbiJdfQ=="}